{"ast":null,"code":"var _jsxFileName = \"/Users/chandan/Desktop/ZTA prototype1/business-dashboard/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate, useNavigate, useLocation } from 'react-router-dom';\nimport Dashboard from './components/Dashboard';\nimport keycloak from './keycloak';\n\n// Login Page Component\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginPage = ({\n  onLogin,\n  keycloakError\n}) => {\n  _s();\n  const navigate = useNavigate();\n  const handleLogin = () => {\n    // Redirect to Keycloak login - it will come back to the current URL\n    keycloak.login({\n      redirectUri: window.location.origin + window.location.pathname\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 flex items-center justify-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-md w-full space-y-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mx-auto h-12 w-12 text-indigo-600\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"h-12 w-12\",\n            fill: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 23,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 22,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"mt-6 text-center text-3xl font-extrabold text-gray-900\",\n          children: \"Sign in to your account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-2 text-center text-sm text-gray-600\",\n          children: \"BusinessPro Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 9\n      }, this), keycloakError && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm\",\n          children: [\"Authentication Error: \", keycloakError]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-8 space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLogin,\n          className: \"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"absolute left-0 inset-y-0 flex items-center pl-3\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"h-5 w-5 text-indigo-500 group-hover:text-indigo-400\",\n              fill: \"currentColor\",\n              viewBox: \"0 0 20 20\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                fillRule: \"evenodd\",\n                d: \"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z\",\n                clipRule: \"evenodd\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 47,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 46,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 13\n          }, this), \"Sign in with Keycloak\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center text-xs text-gray-500\",\n          children: \"Secure authentication powered by Keycloak\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 18,\n    columnNumber: 5\n  }, this);\n};\n\n// Dashboard Page Component\n_s(LoginPage, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n  return [useNavigate];\n});\n_c = LoginPage;\nconst DashboardPage = ({\n  user,\n  keycloakInstance\n}) => {\n  const handleLogout = () => {\n    keycloakInstance.logout({\n      redirectUri: window.location.origin + '/login'\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Dashboard, {\n    isAuthenticated: true,\n    user: user,\n    onLogout: handleLogout,\n    keycloak: keycloakInstance\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n\n// Protected Route Component\n_c2 = DashboardPage;\nconst ProtectedRoute = ({\n  children,\n  isAuthenticated,\n  isLoading\n}) => {\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-50 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-4 text-gray-600\",\n          children: \"Checking authentication...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this);\n  }\n  return isAuthenticated ? children : /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/login\",\n    replace: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 39\n  }, this);\n};\n\n// Auth Handler Component - processes authentication state changes\n_c3 = ProtectedRoute;\nconst AuthHandler = ({\n  isAuthenticated,\n  isLoading,\n  onAuthStateChange\n}) => {\n  _s2();\n  const location = useLocation();\n  const navigate = useNavigate();\n  useEffect(() => {\n    // If we just got authenticated and we're on login page, redirect to dashboard\n    if (isAuthenticated && !isLoading && location.pathname === '/login') {\n      console.log('User authenticated, redirecting to dashboard');\n      navigate('/dashboard', {\n        replace: true\n      });\n    }\n\n    // If not authenticated and trying to access protected route, redirect to login\n    if (!isAuthenticated && !isLoading && location.pathname === '/dashboard') {\n      console.log('User not authenticated, redirecting to login');\n      navigate('/login', {\n        replace: true\n      });\n    }\n  }, [isAuthenticated, isLoading, location.pathname, navigate]);\n  return null; // This component doesn't render anything\n};\n\n// Main App Component\n_s2(AuthHandler, \"fPjCxODVr6jVvib6o2c9VLE4s84=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c4 = AuthHandler;\nfunction App() {\n  _s3();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [keycloakError, setKeycloakError] = useState(null);\n  const [keycloakInitialized, setKeycloakInitialized] = useState(false);\n\n  // Function to load user profile\n  const loadUserProfile = async () => {\n    try {\n      var _keycloak$realmAccess;\n      const profile = await keycloak.loadUserProfile();\n      return {\n        name: `${profile.firstName || ''} ${profile.lastName || ''}`.trim() || profile.username,\n        email: profile.email,\n        username: profile.username,\n        firstName: profile.firstName,\n        lastName: profile.lastName,\n        roles: ((_keycloak$realmAccess = keycloak.realmAccess) === null || _keycloak$realmAccess === void 0 ? void 0 : _keycloak$realmAccess.roles) || [],\n        token: keycloak.token,\n        refreshToken: keycloak.refreshToken\n      };\n    } catch (profileError) {\n      var _keycloak$realmAccess2;\n      console.warn('Could not load user profile, using token data:', profileError);\n      const tokenParsed = keycloak.tokenParsed;\n      return {\n        name: (tokenParsed === null || tokenParsed === void 0 ? void 0 : tokenParsed.name) || (tokenParsed === null || tokenParsed === void 0 ? void 0 : tokenParsed.preferred_username) || 'User',\n        email: (tokenParsed === null || tokenParsed === void 0 ? void 0 : tokenParsed.email) || '',\n        username: (tokenParsed === null || tokenParsed === void 0 ? void 0 : tokenParsed.preferred_username) || '',\n        firstName: (tokenParsed === null || tokenParsed === void 0 ? void 0 : tokenParsed.given_name) || '',\n        lastName: (tokenParsed === null || tokenParsed === void 0 ? void 0 : tokenParsed.family_name) || '',\n        roles: ((_keycloak$realmAccess2 = keycloak.realmAccess) === null || _keycloak$realmAccess2 === void 0 ? void 0 : _keycloak$realmAccess2.roles) || [],\n        token: keycloak.token,\n        refreshToken: keycloak.refreshToken\n      };\n    }\n  };\n\n  // Initialize Keycloak\n  useEffect(() => {\n    const initKeycloak = async () => {\n      try {\n        console.log('Initializing Keycloak...');\n        const authenticated = await keycloak.init({\n          onLoad: 'check-sso',\n          silentCheckSsoRedirectUri: window.location.origin + '/silent-check-sso.html',\n          pkceMethod: 'S256',\n          checkLoginIframe: false,\n          // This is crucial - it handles the callback properly\n          flow: 'standard'\n        });\n        console.log('Keycloak initialized. Authenticated:', authenticated);\n        setKeycloakInitialized(true);\n        setIsAuthenticated(authenticated);\n        if (authenticated) {\n          console.log('User is authenticated, loading profile...');\n          const userData = await loadUserProfile();\n          setUser(userData);\n          console.log('User profile loaded:', userData);\n        } else {\n          console.log('User not authenticated');\n        }\n      } catch (error) {\n        console.error('Keycloak initialization failed:', error);\n        setKeycloakError(error.message || 'Authentication service unavailable');\n      } finally {\n        setLoading(false);\n      }\n    };\n    initKeycloak();\n  }, []);\n\n  // Setup Keycloak event listeners\n  useEffect(() => {\n    if (!keycloakInitialized) return;\n    console.log('Setting up Keycloak event listeners...');\n\n    // Token expired - try to refresh\n    keycloak.onTokenExpired = () => {\n      console.log('Token expired, attempting refresh...');\n      keycloak.updateToken(30).then(refreshed => {\n        if (refreshed) {\n          console.log('Token refreshed successfully');\n          setUser(prev => prev ? {\n            ...prev,\n            token: keycloak.token,\n            refreshToken: keycloak.refreshToken\n          } : null);\n        }\n      }).catch(error => {\n        console.error('Token refresh failed:', error);\n        handleLogout();\n      });\n    };\n\n    // Authentication success\n    keycloak.onAuthSuccess = async () => {\n      console.log('Authentication successful');\n      setKeycloakError(null);\n      setIsAuthenticated(true);\n\n      // Load user profile after successful authentication\n      try {\n        const userData = await loadUserProfile();\n        setUser(userData);\n        console.log('User profile loaded after auth success:', userData);\n      } catch (error) {\n        console.error('Failed to load user profile after auth success:', error);\n      }\n    };\n\n    // Authentication error\n    keycloak.onAuthError = error => {\n      console.error('Authentication error:', error);\n      setKeycloakError('Authentication failed. Please try again.');\n      setIsAuthenticated(false);\n      setUser(null);\n    };\n\n    // Logout\n    keycloak.onAuthLogout = () => {\n      console.log('User logged out');\n      handleLogout();\n    };\n\n    // Authentication refresh success\n    keycloak.onAuthRefreshSuccess = () => {\n      console.log('Token refresh successful');\n    };\n\n    // Authentication refresh error\n    keycloak.onAuthRefreshError = () => {\n      console.log('Token refresh failed');\n      handleLogout();\n    };\n\n    // Cleanup function\n    return () => {\n      keycloak.onTokenExpired = null;\n      keycloak.onAuthSuccess = null;\n      keycloak.onAuthError = null;\n      keycloak.onAuthLogout = null;\n      keycloak.onAuthRefreshSuccess = null;\n      keycloak.onAuthRefreshError = null;\n    };\n  }, [keycloakInitialized]);\n\n  // Handle logout\n  const handleLogout = () => {\n    console.log('Handling logout...');\n    setIsAuthenticated(false);\n    setUser(null);\n    setKeycloakError(null);\n  };\n\n  // Handle authentication state changes\n  const handleAuthStateChange = (authenticated, userData) => {\n    setIsAuthenticated(authenticated);\n    setUser(userData);\n  };\n\n  // Show loading spinner while initializing Keycloak\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-50 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-4 text-gray-600\",\n          children: \"Initializing authentication...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Show error screen if Keycloak failed to initialize\n  if (keycloakError && !keycloakInitialized) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-50 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center max-w-md\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-red-50 border border-red-200 rounded-lg p-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-red-800 mb-2\",\n            children: \"Authentication Service Error\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-red-600 mb-4\",\n            children: keycloakError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => window.location.reload(),\n            className: \"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors\",\n            children: \"Retry\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(AuthHandler, {\n        isAuthenticated: isAuthenticated,\n        isLoading: loading,\n        onAuthStateChange: handleAuthStateChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/login\",\n          element: /*#__PURE__*/_jsxDEV(LoginPage, {\n            onLogin: () => {},\n            keycloakError: keycloakError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/dashboard\",\n          element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n            isAuthenticated: isAuthenticated,\n            isLoading: loading,\n            children: /*#__PURE__*/_jsxDEV(DashboardPage, {\n              user: user,\n              keycloakInstance: keycloak\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          element: /*#__PURE__*/_jsxDEV(Navigate, {\n            to: isAuthenticated ? \"/dashboard\" : \"/login\",\n            replace: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"*\",\n          element: /*#__PURE__*/_jsxDEV(Navigate, {\n            to: isAuthenticated ? \"/dashboard\" : \"/login\",\n            replace: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 326,\n    columnNumber: 5\n  }, this);\n}\n_s3(App, \"YTHWymGwCU6KW+/+G1Tp+IeYPZ8=\");\n_c5 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"LoginPage\");\n$RefreshReg$(_c2, \"DashboardPage\");\n$RefreshReg$(_c3, \"ProtectedRoute\");\n$RefreshReg$(_c4, \"AuthHandler\");\n$RefreshReg$(_c5, \"App\");","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","useNavigate","useLocation","Dashboard","keycloak","jsxDEV","_jsxDEV","LoginPage","onLogin","keycloakError","_s","navigate","handleLogin","login","redirectUri","window","location","origin","pathname","className","children","fill","viewBox","d","fileName","_jsxFileName","lineNumber","columnNumber","onClick","fillRule","clipRule","_c","DashboardPage","user","keycloakInstance","handleLogout","logout","isAuthenticated","onLogout","_c2","ProtectedRoute","isLoading","to","replace","_c3","AuthHandler","onAuthStateChange","_s2","console","log","_c4","App","_s3","setIsAuthenticated","setUser","loading","setLoading","setKeycloakError","keycloakInitialized","setKeycloakInitialized","loadUserProfile","_keycloak$realmAccess","profile","name","firstName","lastName","trim","username","email","roles","realmAccess","token","refreshToken","profileError","_keycloak$realmAccess2","warn","tokenParsed","preferred_username","given_name","family_name","initKeycloak","authenticated","init","onLoad","silentCheckSsoRedirectUri","pkceMethod","checkLoginIframe","flow","userData","error","message","onTokenExpired","updateToken","then","refreshed","prev","catch","onAuthSuccess","onAuthError","onAuthLogout","onAuthRefreshSuccess","onAuthRefreshError","handleAuthStateChange","reload","path","element","_c5","$RefreshReg$"],"sources":["/Users/chandan/Desktop/ZTA prototype1/business-dashboard/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate, useNavigate, useLocation } from 'react-router-dom';\nimport Dashboard from './components/Dashboard';\nimport keycloak from './keycloak';\n\n// Login Page Component\nconst LoginPage = ({ onLogin, keycloakError }) => {\n  const navigate = useNavigate();\n  \n  const handleLogin = () => {\n    // Redirect to Keycloak login - it will come back to the current URL\n    keycloak.login({\n      redirectUri: window.location.origin + window.location.pathname\n    });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n      <div className=\"max-w-md w-full space-y-8\">\n        <div>\n          <div className=\"mx-auto h-12 w-12 text-indigo-600\">\n            <svg className=\"h-12 w-12\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z\"/>\n            </svg>\n          </div>\n          <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\n            Sign in to your account\n          </h2>\n          <p className=\"mt-2 text-center text-sm text-gray-600\">\n            BusinessPro Dashboard\n          </p>\n        </div>\n        \n        {keycloakError && (\n          <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded\">\n            <p className=\"text-sm\">Authentication Error: {keycloakError}</p>\n          </div>\n        )}\n        \n        <div className=\"mt-8 space-y-6\">\n          <button\n            onClick={handleLogin}\n            className=\"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors\"\n          >\n            <span className=\"absolute left-0 inset-y-0 flex items-center pl-3\">\n              <svg className=\"h-5 w-5 text-indigo-500 group-hover:text-indigo-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fillRule=\"evenodd\" d=\"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z\" clipRule=\"evenodd\" />\n              </svg>\n            </span>\n            Sign in with Keycloak\n          </button>\n          \n          <div className=\"text-center text-xs text-gray-500\">\n            Secure authentication powered by Keycloak\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Dashboard Page Component\nconst DashboardPage = ({ user, keycloakInstance }) => {\n  const handleLogout = () => {\n    keycloakInstance.logout({\n      redirectUri: window.location.origin + '/login'\n    });\n  };\n\n  return (\n    <Dashboard\n      isAuthenticated={true}\n      user={user}\n      onLogout={handleLogout}\n      keycloak={keycloakInstance}\n    />\n  );\n};\n\n// Protected Route Component\nconst ProtectedRoute = ({ children, isAuthenticated, isLoading }) => {\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Checking authentication...</p>\n        </div>\n      </div>\n    );\n  }\n  \n  return isAuthenticated ? children : <Navigate to=\"/login\" replace />;\n};\n\n// Auth Handler Component - processes authentication state changes\nconst AuthHandler = ({ \n  isAuthenticated, \n  isLoading, \n  onAuthStateChange \n}) => {\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // If we just got authenticated and we're on login page, redirect to dashboard\n    if (isAuthenticated && !isLoading && location.pathname === '/login') {\n      console.log('User authenticated, redirecting to dashboard');\n      navigate('/dashboard', { replace: true });\n    }\n    \n    // If not authenticated and trying to access protected route, redirect to login\n    if (!isAuthenticated && !isLoading && location.pathname === '/dashboard') {\n      console.log('User not authenticated, redirecting to login');\n      navigate('/login', { replace: true });\n    }\n  }, [isAuthenticated, isLoading, location.pathname, navigate]);\n\n  return null; // This component doesn't render anything\n};\n\n// Main App Component\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [keycloakError, setKeycloakError] = useState(null);\n  const [keycloakInitialized, setKeycloakInitialized] = useState(false);\n\n  // Function to load user profile\n  const loadUserProfile = async () => {\n    try {\n      const profile = await keycloak.loadUserProfile();\n      return {\n        name: `${profile.firstName || ''} ${profile.lastName || ''}`.trim() || profile.username,\n        email: profile.email,\n        username: profile.username,\n        firstName: profile.firstName,\n        lastName: profile.lastName,\n        roles: keycloak.realmAccess?.roles || [],\n        token: keycloak.token,\n        refreshToken: keycloak.refreshToken\n      };\n    } catch (profileError) {\n      console.warn('Could not load user profile, using token data:', profileError);\n      const tokenParsed = keycloak.tokenParsed;\n      return {\n        name: tokenParsed?.name || tokenParsed?.preferred_username || 'User',\n        email: tokenParsed?.email || '',\n        username: tokenParsed?.preferred_username || '',\n        firstName: tokenParsed?.given_name || '',\n        lastName: tokenParsed?.family_name || '',\n        roles: keycloak.realmAccess?.roles || [],\n        token: keycloak.token,\n        refreshToken: keycloak.refreshToken\n      };\n    }\n  };\n\n  // Initialize Keycloak\n  useEffect(() => {\n    const initKeycloak = async () => {\n      try {\n        console.log('Initializing Keycloak...');\n        \n        const authenticated = await keycloak.init({\n          onLoad: 'check-sso',\n          silentCheckSsoRedirectUri: window.location.origin + '/silent-check-sso.html',\n          pkceMethod: 'S256',\n          checkLoginIframe: false,\n          // This is crucial - it handles the callback properly\n          flow: 'standard'\n        });\n\n        console.log('Keycloak initialized. Authenticated:', authenticated);\n        setKeycloakInitialized(true);\n        setIsAuthenticated(authenticated);\n\n        if (authenticated) {\n          console.log('User is authenticated, loading profile...');\n          const userData = await loadUserProfile();\n          setUser(userData);\n          console.log('User profile loaded:', userData);\n        } else {\n          console.log('User not authenticated');\n        }\n\n      } catch (error) {\n        console.error('Keycloak initialization failed:', error);\n        setKeycloakError(error.message || 'Authentication service unavailable');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    initKeycloak();\n  }, []);\n\n  // Setup Keycloak event listeners\n  useEffect(() => {\n    if (!keycloakInitialized) return;\n\n    console.log('Setting up Keycloak event listeners...');\n\n    // Token expired - try to refresh\n    keycloak.onTokenExpired = () => {\n      console.log('Token expired, attempting refresh...');\n      keycloak.updateToken(30)\n        .then((refreshed) => {\n          if (refreshed) {\n            console.log('Token refreshed successfully');\n            setUser(prev => prev ? {\n              ...prev,\n              token: keycloak.token,\n              refreshToken: keycloak.refreshToken\n            } : null);\n          }\n        })\n        .catch((error) => {\n          console.error('Token refresh failed:', error);\n          handleLogout();\n        });\n    };\n\n    // Authentication success\n    keycloak.onAuthSuccess = async () => {\n      console.log('Authentication successful');\n      setKeycloakError(null);\n      setIsAuthenticated(true);\n      \n      // Load user profile after successful authentication\n      try {\n        const userData = await loadUserProfile();\n        setUser(userData);\n        console.log('User profile loaded after auth success:', userData);\n      } catch (error) {\n        console.error('Failed to load user profile after auth success:', error);\n      }\n    };\n\n    // Authentication error\n    keycloak.onAuthError = (error) => {\n      console.error('Authentication error:', error);\n      setKeycloakError('Authentication failed. Please try again.');\n      setIsAuthenticated(false);\n      setUser(null);\n    };\n\n    // Logout\n    keycloak.onAuthLogout = () => {\n      console.log('User logged out');\n      handleLogout();\n    };\n\n    // Authentication refresh success\n    keycloak.onAuthRefreshSuccess = () => {\n      console.log('Token refresh successful');\n    };\n\n    // Authentication refresh error\n    keycloak.onAuthRefreshError = () => {\n      console.log('Token refresh failed');\n      handleLogout();\n    };\n\n    // Cleanup function\n    return () => {\n      keycloak.onTokenExpired = null;\n      keycloak.onAuthSuccess = null;\n      keycloak.onAuthError = null;\n      keycloak.onAuthLogout = null;\n      keycloak.onAuthRefreshSuccess = null;\n      keycloak.onAuthRefreshError = null;\n    };\n  }, [keycloakInitialized]);\n\n  // Handle logout\n  const handleLogout = () => {\n    console.log('Handling logout...');\n    setIsAuthenticated(false);\n    setUser(null);\n    setKeycloakError(null);\n  };\n\n  // Handle authentication state changes\n  const handleAuthStateChange = (authenticated, userData) => {\n    setIsAuthenticated(authenticated);\n    setUser(userData);\n  };\n\n  // Show loading spinner while initializing Keycloak\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Initializing authentication...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Show error screen if Keycloak failed to initialize\n  if (keycloakError && !keycloakInitialized) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center max-w-md\">\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-6\">\n            <h3 className=\"text-lg font-semibold text-red-800 mb-2\">\n              Authentication Service Error\n            </h3>\n            <p className=\"text-red-600 mb-4\">{keycloakError}</p>\n            <button\n              onClick={() => window.location.reload()}\n              className=\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors\"\n            >\n              Retry\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <Router>\n      <div className=\"min-h-screen bg-gray-50\">\n        <AuthHandler \n          isAuthenticated={isAuthenticated}\n          isLoading={loading}\n          onAuthStateChange={handleAuthStateChange}\n        />\n        \n        <Routes>\n          {/* Login Route */}\n          <Route\n            path=\"/login\"\n            element={\n              <LoginPage\n                onLogin={() => {}}\n                keycloakError={keycloakError}\n              />\n            }\n          />\n          \n          {/* Dashboard Route - Protected */}\n          <Route\n            path=\"/dashboard\"\n            element={\n              <ProtectedRoute\n                isAuthenticated={isAuthenticated}\n                isLoading={loading}\n              >\n                <DashboardPage\n                  user={user}\n                  keycloakInstance={keycloak}\n                />\n              </ProtectedRoute>\n            }\n          />\n          \n          {/* Default Route - Redirect based on auth status */}\n          <Route\n            path=\"/\"\n            element={\n              <Navigate to={isAuthenticated ? \"/dashboard\" : \"/login\"} replace />\n            }\n          />\n          \n          {/* Catch all other routes */}\n          <Route\n            path=\"*\"\n            element={\n              <Navigate to={isAuthenticated ? \"/dashboard\" : \"/login\"} replace />\n            }\n          />\n        </Routes>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
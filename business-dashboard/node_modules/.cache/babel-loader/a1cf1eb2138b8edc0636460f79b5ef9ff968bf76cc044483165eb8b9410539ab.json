{"ast":null,"code":"var _jsxFileName = \"/Users/chandan/Desktop/ZTA prototype1/business-dashboard/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Dashboard from './components/Dashboard';\nimport keycloak from './Keycloak';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [user, setUser] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [keycloakError, setKeycloakError] = useState(null);\n  useEffect(() => {\n    // Initialize Keycloak\n    keycloak.init({\n      onLoad: 'check-sso',\n      // Options: 'check-sso', 'login-required'\n      silentCheckSsoRedirectUri: window.location.origin + '/silent-check-sso.html',\n      pkceMethod: 'S256'\n    }).then(authenticated => {\n      setIsAuthenticated(authenticated);\n      setIsLoading(false);\n      if (authenticated) {\n        // Load user profile\n        keycloak.loadUserProfile().then(profile => {\n          var _keycloak$realmAccess;\n          setUser({\n            name: profile.firstName + ' ' + profile.lastName,\n            email: profile.email,\n            username: profile.username,\n            roles: ((_keycloak$realmAccess = keycloak.realmAccess) === null || _keycloak$realmAccess === void 0 ? void 0 : _keycloak$realmAccess.roles) || []\n          });\n        }).catch(error => {\n          var _keycloak$tokenParsed, _keycloak$tokenParsed2, _keycloak$tokenParsed3, _keycloak$realmAccess2;\n          console.error('Failed to load user profile:', error);\n          setUser({\n            name: ((_keycloak$tokenParsed = keycloak.tokenParsed) === null || _keycloak$tokenParsed === void 0 ? void 0 : _keycloak$tokenParsed.preferred_username) || 'User',\n            email: ((_keycloak$tokenParsed2 = keycloak.tokenParsed) === null || _keycloak$tokenParsed2 === void 0 ? void 0 : _keycloak$tokenParsed2.email) || '',\n            username: ((_keycloak$tokenParsed3 = keycloak.tokenParsed) === null || _keycloak$tokenParsed3 === void 0 ? void 0 : _keycloak$tokenParsed3.preferred_username) || '',\n            roles: ((_keycloak$realmAccess2 = keycloak.realmAccess) === null || _keycloak$realmAccess2 === void 0 ? void 0 : _keycloak$realmAccess2.roles) || []\n          });\n        });\n      }\n    }).catch(error => {\n      console.error('Keycloak initialization failed:', error);\n      setKeycloakError(error.message);\n      setIsLoading(false);\n    });\n\n    // Token refresh\n    keycloak.onTokenExpired = () => {\n      keycloak.updateToken(30) // Refresh if token expires in 30 seconds\n      .then(refreshed => {\n        if (refreshed) {\n          console.log('Token refreshed');\n        }\n      }).catch(error => {\n        console.error('Failed to refresh token:', error);\n        handleLogout();\n      });\n    };\n  }, []);\n  const handleLogin = () => {\n    keycloak.login({\n      redirectUri: window.location.origin\n    });\n  };\n  const handleLogout = () => {\n    keycloak.logout({\n      redirectUri: window.location.origin\n    });\n  };\n\n  // Loading screen\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-50 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-4 text-gray-600\",\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Error screen\n  if (keycloakError) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-50 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-bold\",\n            children: \"Authentication Error\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: keycloakError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50\",\n    children: /*#__PURE__*/_jsxDEV(Dashboard, {\n      isAuthenticated: isAuthenticated,\n      user: user,\n      onLogin: handleLogin,\n      onLogout: handleLogout,\n      keycloak: keycloak // Pass keycloak instance for advanced features\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"qSpNAScGOsfcVU7Jhts5oUstHVo=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Dashboard","keycloak","jsxDEV","_jsxDEV","App","_s","isAuthenticated","setIsAuthenticated","user","setUser","isLoading","setIsLoading","keycloakError","setKeycloakError","init","onLoad","silentCheckSsoRedirectUri","window","location","origin","pkceMethod","then","authenticated","loadUserProfile","profile","_keycloak$realmAccess","name","firstName","lastName","email","username","roles","realmAccess","catch","error","_keycloak$tokenParsed","_keycloak$tokenParsed2","_keycloak$tokenParsed3","_keycloak$realmAccess2","console","tokenParsed","preferred_username","message","onTokenExpired","updateToken","refreshed","log","handleLogout","handleLogin","login","redirectUri","logout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onLogin","onLogout","_c","$RefreshReg$"],"sources":["/Users/chandan/Desktop/ZTA prototype1/business-dashboard/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Dashboard from './components/Dashboard';\nimport keycloak from './Keycloak';\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [user, setUser] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [keycloakError, setKeycloakError] = useState(null);\n\n  useEffect(() => {\n    // Initialize Keycloak\n    keycloak\n      .init({\n        onLoad: 'check-sso', // Options: 'check-sso', 'login-required'\n        silentCheckSsoRedirectUri: window.location.origin + '/silent-check-sso.html',\n        pkceMethod: 'S256'\n      })\n      .then((authenticated) => {\n        setIsAuthenticated(authenticated);\n        setIsLoading(false);\n\n        if (authenticated) {\n          // Load user profile\n          keycloak\n            .loadUserProfile()\n            .then((profile) => {\n              setUser({\n                name: profile.firstName + ' ' + profile.lastName,\n                email: profile.email,\n                username: profile.username,\n                roles: keycloak.realmAccess?.roles || []\n              });\n            })\n            .catch((error) => {\n              console.error('Failed to load user profile:', error);\n              setUser({\n                name: keycloak.tokenParsed?.preferred_username || 'User',\n                email: keycloak.tokenParsed?.email || '',\n                username: keycloak.tokenParsed?.preferred_username || '',\n                roles: keycloak.realmAccess?.roles || []\n              });\n            });\n        }\n      })\n      .catch((error) => {\n        console.error('Keycloak initialization failed:', error);\n        setKeycloakError(error.message);\n        setIsLoading(false);\n      });\n\n    // Token refresh\n    keycloak.onTokenExpired = () => {\n      keycloak\n        .updateToken(30) // Refresh if token expires in 30 seconds\n        .then((refreshed) => {\n          if (refreshed) {\n            console.log('Token refreshed');\n          }\n        })\n        .catch((error) => {\n          console.error('Failed to refresh token:', error);\n          handleLogout();\n        });\n    };\n  }, []);\n\n  const handleLogin = () => {\n    keycloak.login({\n      redirectUri: window.location.origin\n    });\n  };\n\n  const handleLogout = () => {\n    keycloak.logout({\n      redirectUri: window.location.origin\n    });\n  };\n\n  // Loading screen\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Error screen\n  if (keycloakError) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\n            <h3 className=\"font-bold\">Authentication Error</h3>\n            <p>{keycloakError}</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Dashboard\n        isAuthenticated={isAuthenticated}\n        user={user}\n        onLogin={handleLogin}\n        onLogout={handleLogout}\n        keycloak={keycloak} // Pass keycloak instance for advanced features\n      />\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}